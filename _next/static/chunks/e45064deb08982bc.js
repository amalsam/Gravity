(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33107,e=>{"use strict";var t=e.i(43476),r=e.i(71645);function a({dataAdSlot:e,dataAdFormat:a="auto",dataFullWidthResponsive:l="true",className:s=""}){return(0,r.useEffect)(()=>{try{(window.adsbygoogle||[]).push({})}catch(e){console.error("AdSense error",e)}},[]),(0,t.jsx)("div",{className:`w-full overflow-hidden flex justify-center items-center my-4 ${s}`,children:(0,t.jsx)("ins",{className:"adsbygoogle",style:{display:"block"},"data-ad-client":"ca-pub-XXXXXXXXXXXXXXXX","data-ad-slot":e,"data-ad-format":a,"data-full-width-responsive":l})})}e.s(["AdBanner",()=>a],33107)},42584,e=>{"use strict";var t=e.i(43476),r=e.i(71645);function a({title:e,accentClass:a,sections:l,onClose:s}){return(0,r.useEffect)(()=>{let e=e=>{"Escape"===e.key&&s()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[s]),(0,t.jsx)("div",{className:"fixed inset-0 z-[100] flex items-end md:items-center justify-center bg-black/80 backdrop-blur-sm p-0 md:p-4",onClick:s,children:(0,t.jsxs)("div",{className:"relative w-full md:max-w-2xl bg-[#0d0d0d] border border-white/10 rounded-t-3xl md:rounded-2xl shadow-2xl max-h-[88vh] overflow-hidden flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-5 pt-5 pb-4 border-b border-white/10",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-[10px] font-bold tracking-widest text-gray-500 uppercase",children:"Science"}),(0,t.jsx)("span",{className:`text-[9px] px-1.5 py-0.5 rounded-full border font-bold ${a}`,children:"Physics"})]}),(0,t.jsx)("h2",{className:"text-xl font-extrabold text-white mt-0.5",children:e})]}),(0,t.jsx)("button",{onClick:s,className:"w-8 h-8 flex items-center justify-center rounded-full bg-white/5 border border-white/10 text-gray-400 hover:text-white hover:bg-white/15 transition-all","aria-label":"Close",children:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,t.jsxs)("div",{className:"overflow-y-auto px-5 py-4 space-y-6 custom-scrollbar",children:[l.map((e,r)=>(0,t.jsxs)("section",{children:[(0,t.jsx)("h3",{className:"text-sm font-bold text-white mb-1.5 tracking-wide",children:e.heading}),e.text&&(0,t.jsx)("p",{className:"text-[13px] text-gray-400 leading-relaxed",children:e.text}),e.equations&&(0,t.jsx)("div",{className:"mt-3 space-y-2",children:e.equations.map((e,r)=>(0,t.jsxs)("div",{className:"flex items-start gap-3 bg-white/5 border border-white/8 rounded-xl px-3 py-2.5 font-mono text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600 text-[10px] font-bold pt-0.5 shrink-0 tracking-wider",children:e.label}),(0,t.jsx)("code",{className:"text-emerald-300 text-[13px] leading-snug",children:e.value})]},r))}),e.code&&(0,t.jsx)("pre",{className:"mt-3 bg-black border border-white/10 rounded-xl p-3 text-[11px] md:text-xs text-emerald-300 overflow-x-auto leading-relaxed custom-scrollbar",children:(0,t.jsx)("code",{children:e.code})})]},r)),(0,t.jsx)("div",{className:"pb-2"})]})]})})}e.s(["default",()=>a])},92969,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(33107),l=e.i(42584);let s={0:null,1:"#d97706",2:"#3b82f6",3:"#6b7280",4:"#ef4444",5:"#9ca3af"},n=[{id:1,label:"Sand",icon:"ðŸ–",color:"text-amber-400",bg:"bg-amber-500/20 border-amber-500/40"},{id:2,label:"Water",icon:"ðŸ’§",color:"text-blue-400",bg:"bg-blue-500/20 border-blue-500/40"},{id:4,label:"Fire",icon:"ðŸ”¥",color:"text-red-400",bg:"bg-red-500/20 border-red-500/40"},{id:3,label:"Stone",icon:"ðŸª¨",color:"text-gray-400",bg:"bg-gray-500/20 border-gray-500/40"},{id:0,label:"Erase",icon:"ðŸ§¹",color:"text-gray-500",bg:"bg-white/5 border-white/20"}];function i(){let e=(0,r.useRef)(null),i=(0,r.useRef)(null),o=(0,r.useRef)(null),d=(0,r.useRef)(0),c=(0,r.useRef)(0),x=(0,r.useRef)(4),u=(0,r.useRef)(1),[h,m]=(0,r.useState)(1),[b,p]=(0,r.useState)(4),[f,g]=(0,r.useState)(!1),[v,w]=(0,r.useState)(!1),[j,y]=(0,r.useState)(!0),N=(0,r.useRef)({startY:0,startX:0});u.current=h,x.current=b;let k=(e,t)=>t*d.current+e;(0,r.useEffect)(()=>{let t=e.current;if(!t)return;let r=()=>{t.width=window.innerWidth,t.height=window.innerHeight;let e=Math.floor(t.width/4),r=Math.floor(t.height/4);d.current=e,c.current=r,o.current=new Uint8Array(e*r)};window.addEventListener("resize",r),r();let a=(e,t)=>{if(!o.current)return;let r=Math.floor(e/4),a=Math.floor((t-64)/4),l=x.current,s=d.current,n=c.current;for(let e=-l;e<=l;e++)for(let t=-l;t<=l;t++){if(t*t+e*e>l*l)continue;let i=r+t,d=a+e;i>=0&&i<s&&d>=0&&d<n&&(o.current[k(i,d)]=u.current)}},l=!1,n=e=>{e.target.closest(".ui-panel")||e.target.closest("nav")||(l=!0,a(e.clientX||e.touches[0].clientX,e.clientY||e.touches[0].clientY))},h=e=>{if(!l)return;let t=e.clientX||e.touches&&e.touches[0].clientX,r=e.clientY||e.touches&&e.touches[0].clientY;void 0!==t&&a(t,r)},m=()=>{l=!1};t.addEventListener("mousedown",n),t.addEventListener("mousemove",h),t.addEventListener("touchstart",n,{passive:!0}),t.addEventListener("touchmove",h,{passive:!0}),window.addEventListener("mouseup",m),window.addEventListener("touchend",m);let b=t.getContext("2d"),p=0,f=e=>{i.current=requestAnimationFrame(f),e-p>16&&((()=>{let e=o.current;if(!e)return;let t=d.current,r=c.current;for(let a=r-2;a>=0;a--){let l=Math.random()>.5?1:-1;for(let s=0;s<t;s++){let n=s,i=e[k(n,a)];if(0!==i)if(1===i)if(0===e[k(n,a+1)])e[k(n,a+1)]=1,e[k(n,a)]=0;else if(2===e[k(n,a+1)])e[k(n,a+1)]=1,e[k(n,a)]=2;else{let r=n-l,s=n+l;r>=0&&0===e[k(r,a+1)]?(e[k(r,a+1)]=1,e[k(n,a)]=0):s<t&&0===e[k(s,a+1)]&&(e[k(s,a+1)]=1,e[k(n,a)]=0)}else if(2===i)if(a+1<r&&0===e[k(n,a+1)])e[k(n,a+1)]=2,e[k(n,a)]=0;else{let r=n-1,s=n+1,i=r>=0&&0===e[k(r,a)],o=s<t&&0===e[k(s,a)];i&&o?(l>0?e[k(r,a)]=2:e[k(s,a)]=2,e[k(n,a)]=0):i?(e[k(r,a)]=2,e[k(n,a)]=0):o&&(e[k(s,a)]=2,e[k(n,a)]=0)}else 4===i?(.05>Math.random()&&(e[k(n,a)]=5),a>0&&0===e[k(n,a-1)]&&.3>Math.random()&&(e[k(n,a-1)]=4),a+1<r&&1===e[k(n,a+1)]&&.02>Math.random()&&(e[k(n,a+1)]=4),n+1<t&&1===e[k(n+1,a)]&&.02>Math.random()&&(e[k(n+1,a)]=4),n-1>=0&&1===e[k(n-1,a)]&&.02>Math.random()&&(e[k(n-1,a)]=4),a+1<r&&2===e[k(n,a+1)]&&(e[k(n,a)]=5)):5===i&&(a>0&&0===e[k(n,a-1)]&&.4>Math.random()?(e[k(n,a-1)]=5,e[k(n,a)]=0):.02>Math.random()&&(e[k(n,a)]=0))}}})(),p=e),(()=>{let e=o.current;if(!e)return;let r=d.current,a=c.current;b.fillStyle="#0a0a0a",b.fillRect(0,0,t.width,t.height);for(let t=0;t<a;t++)for(let a=0;a<r;a++){let r=e[k(a,t)];if(0===r)continue;let l=s[r];if(4===r&&(l=Math.random()>.5?"#f97316":"#ef4444"),5===r&&(l="#9ca3af"+Math.floor(80*Math.random()+100).toString(16)),1===r){let e=Math.floor(20*Math.random());l=`rgb(${217+e},${119+e},6)`}b.fillStyle=l,b.fillRect(4*a,4*t,4,4)}})()};return f(0),()=>{window.removeEventListener("resize",r),t.removeEventListener("mousedown",n),t.removeEventListener("mousemove",h),t.removeEventListener("touchstart",n),t.removeEventListener("touchmove",h),window.removeEventListener("mouseup",m),window.removeEventListener("touchend",m),cancelAnimationFrame(i.current)}},[]);let M=()=>{o.current&&o.current.fill(0)};return(0,t.jsxs)("div",{className:"relative w-full h-[calc(100vh-4rem)] bg-black overflow-hidden select-none",children:[f&&(0,t.jsx)(l.default,{title:"Falling Sand â€” Cellular Automata",accentClass:"text-amber-400 border-amber-400/30 bg-amber-400/10",onClose:()=>g(!1),sections:[{heading:"Cellular Automata",text:"A cellular automaton is a grid of cells, each in a discrete state. Each frame, every cell updates its state based purely on the states of its immediate neighbours and a small set of rules. Despite the simplicity, extraordinarily complex emergent behaviour arises â€” from snowflake formation to fluid flow to Conway's Game of Life."},{heading:"Per-Material Rules",equations:[{label:"Sand",value:"Falls down. Slides diagonally if blocked. Displaces water."},{label:"Water",value:"Falls down. Spreads sideways. Extinguishes fire."},{label:"Fire",value:"Rises upward. Spreads to adjacent sand. Becomes smoke."},{label:"Stone",value:"Immovable. Deflects all other materials."}]},{heading:"State Machine per Cell",code:`// Sand update rule (bottom-to-top scan)
if (grid[c][r] === SAND) {
  if (grid[c][r+1] === EMPTY)        { swap(r, r+1); }
  else if (grid[c][r+1] === WATER)   { swap(r, r+1); } // sinks
  else if (grid[c\xb11][r+1] === EMPTY) { slide diagonally; }
}`},{heading:"Why Scan Bottom-to-Top?",text:"Updating from bottom to top prevents particles from 'teleporting' â€” if we updated top-to-bottom, a falling particle could be processed twice in one frame, appearing to skip cells. Bottom-up ensures each particle moves at most one cell per frame, giving physically consistent results."}]}),(0,t.jsx)("canvas",{ref:e,className:"block w-full h-full bg-black touch-none cursor-crosshair",style:{width:"100vw",height:"100vh"}}),(0,t.jsx)("div",{className:"absolute top-0 right-0 w-[400px] h-[400px] bg-amber-900/10 rounded-full blur-[120px] pointer-events-none"}),(0,t.jsx)("button",{onClick:()=>y(!j),className:"hidden md:flex absolute top-6 right-6 z-50 bg-white/5 backdrop-blur-xl border border-white/20 p-3 rounded-full shadow-2xl text-white items-center justify-center ui-panel hover:bg-white/10",children:(0,t.jsx)("svg",{className:`w-5 h-5 transition-transform duration-300 ${j?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})}),(0,t.jsx)("div",{className:`ui-panel hidden md:block absolute top-6 right-20 bg-white/5 backdrop-blur-3xl p-4 rounded-2xl border border-white/10 text-sm text-white w-[280px] shadow-2xl transition-all duration-300 z-40 ${j?"translate-x-0 opacity-100 visible":"translate-x-[120%] opacity-0 invisible pointer-events-none"}`,children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("span",{className:"text-xl",children:"ðŸ–"}),(0,t.jsx)("h2",{className:"text-xl font-extrabold bg-clip-text text-transparent bg-gradient-to-r from-amber-400 to-orange-500",children:"Falling Sand"})]}),(0,t.jsx)("p",{className:"text-[10px] text-gray-400 tracking-wider mb-3 pb-2 border-b border-white/10 uppercase font-semibold",children:"Cellular Automata"}),(0,t.jsxs)("div",{className:"space-y-3 max-h-[600px] overflow-y-auto pr-1 custom-scrollbar",children:[(0,t.jsx)("div",{className:"bg-amber-500/5 border border-amber-500/15 p-2.5 rounded-xl",children:(0,t.jsxs)("p",{className:"text-[10px] text-amber-200",children:[(0,t.jsx)("strong",{className:"text-white",children:"Drag"})," to paint. Select material below."]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[9px] text-gray-500 font-bold tracking-wider mb-2",children:"MATERIAL"}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-1.5",children:n.map(e=>(0,t.jsxs)("button",{onClick:()=>m(e.id),className:`py-2 px-2 rounded-xl text-[10px] font-bold transition-all flex items-center gap-1.5 border ${h===e.id?e.bg:"bg-white/5 border-white/10 text-gray-400"} ${h===e.id?e.color:""}`,children:[(0,t.jsx)("span",{children:e.icon}),e.label]},e.id))})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("label",{className:"text-gray-400 text-[9px] font-bold tracking-wider",children:"BRUSH SIZE"}),(0,t.jsx)("span",{className:"text-[9px] font-mono text-amber-400",children:b})]}),(0,t.jsx)("input",{type:"range",min:"1",max:"15",step:"1",value:b,onChange:e=>p(+e.target.value),className:"w-full h-1 bg-gray-700 rounded-lg appearance-none accent-amber-500 cursor-pointer"})]}),(0,t.jsxs)("div",{className:"pt-2 border-t border-white/10 space-y-2",children:[(0,t.jsxs)("button",{onClick:M,className:"w-full py-2 bg-red-500/10 border border-red-500/30 text-red-300 rounded-xl text-[10px] font-bold hover:bg-red-500/20 transition-all flex items-center justify-center gap-1.5",children:[(0,t.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"CLEAR CANVAS"]}),(0,t.jsxs)("button",{onClick:()=>g(!0),className:"w-full py-2 bg-amber-500/10 border border-amber-500/30 text-amber-300 rounded-xl text-[10px] font-bold hover:bg-amber-500/20 transition-all flex items-center justify-center gap-1.5",children:[(0,t.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"THE SCIENCE"]})]})]})]})}),(0,t.jsxs)("div",{className:`ui-panel md:hidden fixed bottom-0 left-0 right-0 w-full bg-black/70 backdrop-blur-3xl border-t border-white/15 rounded-t-3xl z-40 transition-all duration-500 ease-[cubic-bezier(0.32,0.72,0,1)] ${v?"h-[65vh]":"h-[110px]"}`,onTouchStart:e=>{N.current.startY=e.touches[0].clientY,N.current.startX=e.touches[0].clientX},onTouchEnd:e=>{let t=N.current.startY-e.changedTouches[0].clientY,r=Math.abs(N.current.startX-e.changedTouches[0].clientX);Math.abs(t)>40&&Math.abs(t)>r&&w(t>0)},children:[(0,t.jsxs)("div",{className:"w-full flex flex-col items-center pt-2 pb-1 cursor-pointer gap-1",onClick:()=>w(!v),children:[(0,t.jsx)("div",{className:`w-10 h-1 rounded-full transition-colors duration-300 ${v?"bg-amber-400/50":"bg-white/30"}`}),!v&&(0,t.jsx)("span",{className:"text-[9px] text-white/30 tracking-widest uppercase animate-bounce",children:"swipe up"})]}),(0,t.jsx)("div",{className:"px-4 pb-4",children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5 shrink-0",children:[(0,t.jsx)("span",{className:"text-lg",children:"ðŸ–"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-extrabold bg-clip-text text-transparent bg-gradient-to-r from-amber-400 to-orange-500 leading-none",children:"Falling Sand"}),(0,t.jsx)("div",{className:"text-[8px] text-gray-500 tracking-widest uppercase",children:"Cellular Automata"})]})]}),(0,t.jsx)("div",{className:"flex gap-1.5 ml-auto shrink-0",children:(0,t.jsxs)("div",{className:"flex flex-col items-center bg-black/40 border border-white/5 rounded-lg px-2.5 py-1",children:[(0,t.jsx)("span",{className:"text-[8px] text-gray-500 font-bold tracking-wider",children:"MAT"}),(0,t.jsx)("span",{className:"font-mono text-xs leading-none",children:n.find(e=>e.id===h)?.icon})]})})]}),(0,t.jsx)("div",{className:"flex gap-1.5 mt-2.5 flex-wrap",children:n.map(e=>(0,t.jsx)("button",{onClick:()=>m(e.id),className:`flex-1 min-w-[60px] flex items-center justify-center gap-1 py-2 rounded-xl text-[9px] font-bold transition-all border ${h===e.id?`${e.bg} ${e.color}`:"bg-white/5 text-gray-400 border-white/10"}`,children:e.icon},e.id))}),v&&(0,t.jsx)("div",{className:"mt-3 space-y-3 overflow-y-auto pr-0.5 custom-scrollbar",style:{maxHeight:"calc(65vh - 130px)"},children:(0,t.jsxs)("div",{className:"pt-1 border-t border-white/10 space-y-2",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("label",{className:"text-gray-400 text-[9px] font-bold tracking-wider",children:"BRUSH SIZE"}),(0,t.jsx)("span",{className:"text-[9px] font-mono text-amber-400",children:b})]}),(0,t.jsx)("input",{type:"range",min:"1",max:"15",step:"1",value:b,onChange:e=>p(+e.target.value),className:"w-full h-1.5 bg-gray-700 rounded-lg appearance-none accent-amber-500 cursor-pointer"})]}),(0,t.jsxs)("button",{onClick:M,className:"w-full py-2.5 bg-red-500/10 border border-red-500/30 text-red-300 rounded-xl text-[10px] font-bold transition-all flex items-center justify-center gap-1.5",children:[(0,t.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"CLEAR CANVAS"]}),(0,t.jsxs)("button",{onClick:()=>g(!0),className:"w-full py-2.5 bg-amber-500/10 border border-amber-500/30 text-amber-300 rounded-xl text-[10px] font-bold transition-all flex items-center justify-center gap-1.5",children:[(0,t.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"THE SCIENCE"]})]})})]})})]}),(0,t.jsx)(a.AdBanner,{className:"absolute bottom-4 left-0 right-0 z-10 pointer-events-none"})]})}e.s(["default",()=>i])}]);