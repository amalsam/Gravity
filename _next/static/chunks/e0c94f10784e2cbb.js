(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33107,e=>{"use strict";var t=e.i(43476),s=e.i(71645);function r({dataAdSlot:e,dataAdFormat:r="auto",dataFullWidthResponsive:i="true",className:a=""}){return(0,s.useEffect)(()=>{try{(window.adsbygoogle||[]).push({})}catch(e){console.error("AdSense error",e)}},[]),(0,t.jsx)("div",{className:`w-full overflow-hidden flex justify-center items-center my-4 ${a}`,children:(0,t.jsx)("ins",{className:"adsbygoogle",style:{display:"block"},"data-ad-client":"ca-pub-XXXXXXXXXXXXXXXX","data-ad-slot":e,"data-ad-format":r,"data-full-width-responsive":i})})}e.s(["AdBanner",()=>r],33107)},42584,e=>{"use strict";var t=e.i(43476),s=e.i(71645);function r({title:e,accentClass:r,sections:i,onClose:a}){return(0,s.useEffect)(()=>{let e=e=>{"Escape"===e.key&&a()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[a]),(0,t.jsx)("div",{className:"fixed inset-0 z-[100] flex items-end md:items-center justify-center bg-black/80 backdrop-blur-sm p-0 md:p-4",onClick:a,children:(0,t.jsxs)("div",{className:"relative w-full md:max-w-2xl bg-[#0d0d0d] border border-white/10 rounded-t-3xl md:rounded-2xl shadow-2xl max-h-[88vh] overflow-hidden flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-5 pt-5 pb-4 border-b border-white/10",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-[10px] font-bold tracking-widest text-gray-500 uppercase",children:"Science"}),(0,t.jsx)("span",{className:`text-[9px] px-1.5 py-0.5 rounded-full border font-bold ${r}`,children:"Physics"})]}),(0,t.jsx)("h2",{className:"text-xl font-extrabold text-white mt-0.5",children:e})]}),(0,t.jsx)("button",{onClick:a,className:"w-8 h-8 flex items-center justify-center rounded-full bg-white/5 border border-white/10 text-gray-400 hover:text-white hover:bg-white/15 transition-all","aria-label":"Close",children:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,t.jsxs)("div",{className:"overflow-y-auto px-5 py-4 space-y-6 custom-scrollbar",children:[i.map((e,s)=>(0,t.jsxs)("section",{children:[(0,t.jsx)("h3",{className:"text-sm font-bold text-white mb-1.5 tracking-wide",children:e.heading}),e.text&&(0,t.jsx)("p",{className:"text-[13px] text-gray-400 leading-relaxed",children:e.text}),e.equations&&(0,t.jsx)("div",{className:"mt-3 space-y-2",children:e.equations.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-start gap-3 bg-white/5 border border-white/8 rounded-xl px-3 py-2.5 font-mono text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600 text-[10px] font-bold pt-0.5 shrink-0 tracking-wider",children:e.label}),(0,t.jsx)("code",{className:"text-emerald-300 text-[13px] leading-snug",children:e.value})]},s))}),e.code&&(0,t.jsx)("pre",{className:"mt-3 bg-black border border-white/10 rounded-xl p-3 text-[11px] md:text-xs text-emerald-300 overflow-x-auto leading-relaxed custom-scrollbar",children:(0,t.jsx)("code",{children:e.code})})]},s)),(0,t.jsx)("div",{className:"pb-2"})]})]})})}e.s(["default",()=>r])},72632,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(33107),i=e.i(42584);function a(){let e=(0,s.useRef)(null),a=(0,s.useRef)(null),o=(0,s.useRef)(null),[n,l]=(0,s.useState)(180),[d,c]=(0,s.useState)(1.5),[h,x]=(0,s.useState)(1),[u,m]=(0,s.useState)(1),[b,p]=(0,s.useState)(80),[g,f]=(0,s.useState)(!1),[v,w]=(0,s.useState)(!1),[y,j]=(0,s.useState)(!1),[N,k]=(0,s.useState)(!1),[C,S]=(0,s.useState)(!0),T=(0,s.useRef)({startY:0,startX:0}),E=(0,s.useRef)({});E.current={boidCount:n,separation:d,alignment:h,cohesion:u,visualRadius:b,predator:g,showTrails:v},(0,s.useEffect)(()=>{let t=e.current;if(!t)return;let s=()=>{t.width=window.innerWidth,t.height=window.innerHeight};window.addEventListener("resize",s),s();let r=t.getContext("2d");class i{constructor(e=!1){this.x=Math.random()*t.width,this.y=Math.random()*t.height;const s=Math.random()*Math.PI*2,r=e?3.5:2.5+Math.random();this.vx=Math.cos(s)*r,this.vy=Math.sin(s)*r,this.isPredator=e,this.history=[]}steer(e){let t=E.current,s=t.visualRadius,r=this.isPredator?4.5:3.5,i=this.isPredator?.25:.15,a=0,o=0,n=0,l=0,d=0,c=0,h=0,x=0,u=0,m=0,b=0;for(let t of e){if(t===this)continue;let e=t.x-this.x,r=t.y-this.y,i=Math.sqrt(e*e+r*r);!this.isPredator&&t.isPredator&&i<2.5*s&&(m-=e/i*3,b-=r/i*3),this.isPredator&&!t.isPredator&&i<1.5*s&&(m+=e/i,b+=r/i),t.isPredator===this.isPredator&&!(i>s)&&!(i<.01)&&(i<.35*s&&(a-=e/(i*i+.1),o-=r/(i*i+.1),n++),l+=t.vx,d+=t.vy,c++,h+=t.x,x+=t.y,u++)}let p=(e,t,s)=>{let r=Math.sqrt(e*e+t*t);return r>s?[e/r*s,t/r*s]:[e,t]},g=0,f=0;if(n){let[e,s]=p(a,o,i);g+=e*t.separation,f+=s*t.separation}if(c){let[e,s]=p(l/c-this.vx,d/c-this.vy,i);g+=e*t.alignment,f+=s*t.alignment}if(u){let[e,s]=p(h/u-this.x,x/u-this.y,i);g+=e*t.cohesion,f+=s*t.cohesion}g+=m*i*2,f+=b*i*2,this.vx+=g,this.vy+=f;let v=Math.sqrt(this.vx*this.vx+this.vy*this.vy),w=this.isPredator?2.5:1.5;v>r&&(this.vx=this.vx/v*r,this.vy=this.vy/v*r),v<w&&(this.vx=this.vx/v*w*1.01,this.vy=this.vy/v*w*1.01)}move(){this.x+=this.vx,this.y+=this.vy,this.x<0&&(this.x+=t.width),this.x>t.width&&(this.x-=t.width),this.y<0&&(this.y+=t.height),this.y>t.height&&(this.y-=t.height),E.current.showTrails?(this.history.push([this.x,this.y]),this.history.length>20&&this.history.shift()):this.history=[]}draw(e){let t=E.current,s=Math.atan2(this.vy,this.vx),r=this.isPredator?"#ef4444":"#fb7185";if(t.showTrails&&this.history.length>1){for(let[t,s]of(e.beginPath(),e.moveTo(this.history[0][0],this.history[0][1]),this.history))e.lineTo(t,s);e.strokeStyle=r+"30",e.lineWidth=1,e.stroke()}e.save(),e.translate(this.x,this.y),e.rotate(s),e.beginPath(),e.moveTo(8,0),e.lineTo(-5,4),e.lineTo(-3,0),e.lineTo(-5,-4),e.closePath(),e.fillStyle=this.isPredator?"#ef4444cc":r+"cc",e.shadowBlur=this.isPredator?12:6,e.shadowColor=r,e.fill(),e.restore()}}let n=[],l=E.current.boidCount;for(let e=0;e<l;e++)n.push(new i(!1));n.push(new i(!0)),a.current={boids:n};let d=()=>{o.current=requestAnimationFrame(d);let e=E.current,s=a.current.boids.filter(e=>!e.isPredator),n=a.current.boids.find(e=>e.isPredator);for(;s.length<e.boidCount;)s.push(new i(!1));for(;s.length>e.boidCount;)s.pop();let l=e.predator?[...s,n]:s;for(let e of(a.current.boids=l,r.fillStyle="rgba(0,0,0,0.25)",r.fillRect(0,0,t.width,t.height),r.shadowBlur=0,l))e.steer(l);for(let e of l)e.move(),e.draw(r)};return d(),()=>{window.removeEventListener("resize",s),cancelAnimationFrame(o.current)}},[]);let P=({label:e,value:s,min:r,max:i,step:a,onChange:o,unit:n=""})=>(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("label",{className:"text-gray-400 text-[9px] font-bold tracking-wider",children:e}),(0,t.jsxs)("span",{className:"text-[9px] font-mono text-rose-400",children:[s,n]})]}),(0,t.jsx)("input",{type:"range",min:r,max:i,step:a,value:s,onChange:e=>o(+e.target.value),className:"w-full h-1 bg-gray-700 rounded-lg appearance-none accent-rose-500 cursor-pointer"})]});return(0,t.jsxs)("div",{className:"relative w-full h-[calc(100vh-4rem)] bg-black overflow-hidden select-none",children:[y&&(0,t.jsx)(i.default,{title:"Boids â€” Emergent Flocking",accentClass:"text-rose-400 border-rose-400/30 bg-rose-400/10",onClose:()=>j(!1),sections:[{heading:"Three Rules â€” Infinite Complexity",text:"Craig Reynolds (1986) showed that realistic flocking emerges from just three local steering rules applied independently to each agent. No agent knows the global flock shape â€” complex collective behaviour arises purely from interactions with neighbours within a fixed visual radius."},{heading:"The Three Steering Rules",equations:[{label:"Separation",value:"Steer away from nearby neighbours (avoid crowding)"},{label:"Alignment",value:"Steer toward average heading of neighbours"},{label:"Cohesion",value:"Steer toward average position of neighbours"}]},{heading:"Steering Force Computation",text:"Each rule produces a desired velocity direction. The actual steering force is the difference between the desired velocity and the current velocity, clamped to a maximum force magnitude. The three forces are weighted and summed each frame.",code:`// Separation: flee from too-close neighbours
if (dist < separationRadius) {
  sepForce.x -= (neighbour.x - this.x) / dist;
  sepForce.y -= (neighbour.y - this.y) / dist;
}
// Alignment: match average velocity
alignForce.x += neighbour.vx / n;
alignForce.y += neighbour.vy / n;
// Cohesion: steer toward centroid
cohForce.x += (centroid.x - this.x) / n;
cohForce.y += (centroid.y - this.y) / n;

// Combine with user-adjustable weights
this.vx += sepForce.x * w_sep + alignForce.x * w_ali + cohForce.x * w_coh;`},{heading:"Emergent Behaviour",text:"The predator (red) uses inverted rules: it chases the centroid of nearby prey. Prey detect the predator within a larger radius and apply an extra flee force. This demonstrates how multi-species ecosystems emerge from local rules â€” the same principle drives schooling fish, starling murmurations, and even traffic flow."}]}),(0,t.jsx)("canvas",{ref:e,className:"block w-full h-full bg-black touch-none",style:{width:"100vw",height:"100vh"}}),(0,t.jsx)("div",{className:"absolute top-0 left-0 w-[400px] h-[400px] bg-rose-900/10 rounded-full blur-[120px] pointer-events-none"}),(0,t.jsx)("button",{onClick:()=>S(!C),className:"hidden md:flex absolute top-6 right-6 z-50 bg-white/5 backdrop-blur-xl border border-white/20 p-3 rounded-full shadow-2xl text-white items-center justify-center transition-opacity duration-300 ui-panel hover:bg-white/10",children:(0,t.jsx)("svg",{className:`w-5 h-5 transition-transform duration-300 ${C?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})}),(0,t.jsx)("div",{className:`ui-panel hidden md:block absolute top-6 right-20 bg-white/5 backdrop-blur-3xl p-4 rounded-2xl border border-white/10 text-sm text-white w-[280px] shadow-2xl transition-all duration-300 z-40 ${C?"translate-x-0 opacity-100 visible":"translate-x-[120%] opacity-0 invisible pointer-events-none"}`,children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("span",{className:"text-xl",children:"ðŸ¦"}),(0,t.jsx)("h2",{className:"text-xl font-extrabold bg-clip-text text-transparent bg-gradient-to-r from-rose-400 to-pink-400",children:"Boids Flocking"})]}),(0,t.jsx)("p",{className:"text-[10px] text-gray-400 tracking-wider mb-3 pb-2 border-b border-white/10 uppercase font-semibold",children:"Emergent Swarm Behaviour"}),(0,t.jsxs)("div",{className:"space-y-3 max-h-[600px] overflow-y-auto pr-1 custom-scrollbar",children:[(0,t.jsx)(P,{label:"BOID COUNT",value:n,min:20,max:400,step:10,onChange:l}),(0,t.jsx)(P,{label:"SEPARATION",value:d,min:0,max:4,step:.1,onChange:c}),(0,t.jsx)(P,{label:"ALIGNMENT",value:h,min:0,max:4,step:.1,onChange:x}),(0,t.jsx)(P,{label:"COHESION",value:u,min:0,max:4,step:.1,onChange:m}),(0,t.jsx)(P,{label:"VISUAL RADIUS",value:b,min:30,max:200,step:5,onChange:p}),(0,t.jsxs)("div",{className:"pt-2 border-t border-white/10 space-y-2",children:[(0,t.jsxs)("button",{onClick:()=>f(e=>!e),className:`w-full py-2 rounded-xl text-[10px] font-bold transition-all flex items-center justify-center gap-1.5 border ${g?"bg-red-500/20 border-red-500/40 text-red-300":"bg-white/5 border-white/10 text-gray-400 hover:bg-white/10"}`,children:["ðŸ¦… PREDATOR ",g?"ON":"OFF"]}),(0,t.jsxs)("button",{onClick:()=>w(e=>!e),className:`w-full py-2 rounded-xl text-[10px] font-bold transition-all flex items-center justify-center gap-1.5 border ${v?"bg-rose-500/20 border-rose-500/40 text-rose-300":"bg-white/5 border-white/10 text-gray-400 hover:bg-white/10"}`,children:["âœ¨ TRAILS ",v?"ON":"OFF"]}),(0,t.jsxs)("button",{onClick:()=>j(!0),className:"w-full py-2 bg-rose-500/10 border border-rose-500/30 text-rose-300 rounded-xl text-[10px] font-bold hover:bg-rose-500/20 transition-all flex items-center justify-center gap-1.5",children:[(0,t.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"THE SCIENCE"]})]})]})]})}),(0,t.jsxs)("div",{className:`ui-panel md:hidden fixed bottom-0 left-0 right-0 w-full bg-black/70 backdrop-blur-3xl border-t border-white/15 rounded-t-3xl z-40 transition-all duration-500 ease-[cubic-bezier(0.32,0.72,0,1)] ${N?"h-[65vh]":"h-[110px]"}`,onTouchStart:e=>{T.current.startY=e.touches[0].clientY,T.current.startX=e.touches[0].clientX},onTouchEnd:e=>{let t=T.current.startY-e.changedTouches[0].clientY,s=Math.abs(T.current.startX-e.changedTouches[0].clientX);Math.abs(t)>40&&Math.abs(t)>s&&k(t>0)},children:[(0,t.jsxs)("div",{className:"w-full flex flex-col items-center pt-2 pb-1 cursor-pointer gap-1",onClick:()=>k(!N),children:[(0,t.jsx)("div",{className:`w-10 h-1 rounded-full transition-colors duration-300 ${N?"bg-rose-400/50":"bg-white/30"}`}),!N&&(0,t.jsx)("span",{className:"text-[9px] text-white/30 tracking-widest uppercase animate-bounce",children:"swipe up"})]}),(0,t.jsx)("div",{className:"px-4 pb-4",children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5 shrink-0",children:[(0,t.jsx)("span",{className:"text-lg",children:"ðŸ¦"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-extrabold bg-clip-text text-transparent bg-gradient-to-r from-rose-400 to-pink-400 leading-none",children:"Boids Flocking"}),(0,t.jsx)("div",{className:"text-[8px] text-gray-500 tracking-widest uppercase",children:"Emergent Swarm"})]})]}),(0,t.jsxs)("div",{className:"flex gap-1.5 ml-auto shrink-0",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center bg-black/40 border border-white/5 rounded-lg px-2.5 py-1",children:[(0,t.jsx)("span",{className:"text-[8px] text-gray-500 font-bold tracking-wider",children:"BOIDS"}),(0,t.jsx)("span",{className:"text-white font-mono text-xs leading-none",children:n})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center bg-black/40 border border-white/5 rounded-lg px-2.5 py-1",children:[(0,t.jsx)("span",{className:"text-[8px] text-gray-500 font-bold tracking-wider",children:"PRED"}),(0,t.jsx)("span",{className:`font-mono text-xs leading-none ${g?"text-red-400":"text-gray-500"}`,children:g?"ON":"OFF"})]})]})]}),(0,t.jsxs)("div",{className:"flex gap-2 mt-2.5",children:[(0,t.jsx)("button",{onClick:()=>f(e=>!e),className:`flex-1 flex items-center justify-center gap-1 py-2 rounded-xl text-[10px] font-bold transition-all border ${g?"bg-red-500/20 border-red-500/40 text-red-300":"bg-white/5 text-gray-400 border-white/10"}`,children:"ðŸ¦… PREDATOR"}),(0,t.jsx)("button",{onClick:()=>w(e=>!e),className:`flex-1 flex items-center justify-center gap-1 py-2 rounded-xl text-[10px] font-bold transition-all border ${v?"bg-rose-500/20 border-rose-500/40 text-rose-300":"bg-white/5 text-gray-400 border-white/10"}`,children:"âœ¨ TRAILS"})]}),N&&(0,t.jsxs)("div",{className:"mt-3 space-y-3 overflow-y-auto pr-0.5 custom-scrollbar",style:{maxHeight:"calc(65vh - 130px)"},children:[(0,t.jsxs)("div",{className:"space-y-2.5 pt-1 border-t border-white/10",children:[(0,t.jsx)(P,{label:"BOID COUNT",value:n,min:20,max:400,step:10,onChange:l}),(0,t.jsx)(P,{label:"SEPARATION",value:d,min:0,max:4,step:.1,onChange:c}),(0,t.jsx)(P,{label:"ALIGNMENT",value:h,min:0,max:4,step:.1,onChange:x}),(0,t.jsx)(P,{label:"COHESION",value:u,min:0,max:4,step:.1,onChange:m}),(0,t.jsx)(P,{label:"VISUAL RADIUS",value:b,min:30,max:200,step:5,onChange:p})]}),(0,t.jsx)("div",{className:"pt-2 border-t border-white/10 space-y-2",children:(0,t.jsxs)("button",{onClick:()=>j(!0),className:"w-full py-2.5 bg-rose-500/10 border border-rose-500/30 text-rose-300 rounded-xl text-[10px] font-bold hover:bg-rose-500/20 transition-all flex items-center justify-center gap-1.5",children:[(0,t.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"THE SCIENCE"]})})]})]})})]}),(0,t.jsx)(r.AdBanner,{className:"absolute bottom-4 left-0 right-0 z-10 pointer-events-none"})]})}e.s(["default",()=>a])}]);